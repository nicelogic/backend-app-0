
# pubsub

## 总体思路

a给b发消息，b如果在线，则能够实时收到这个消息。
b切换到需要获取数据的页面时候，触发一次查询。获取需要处理的消息，进行处理
先订阅，后查询。订阅是更新。查询是获取。避免时序问题
包括account等所有数据都遵循这一规则。订阅数据，查询数据。处理更新。
bloc需要做状态持久化吗？ 不需要了，获取本地的缓存。监听更新。
先拿缓存，然后再去拿网络状态。
寻找最佳解决方案不放手。慢慢来。不怕放错。
